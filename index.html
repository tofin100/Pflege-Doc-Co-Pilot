<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Skyjo Scoreboard (3 Spieler)</title>
  <style>
    :root{
      --bg:#070b14;
      --panel:rgba(255,255,255,.06);
      --panel2:rgba(255,255,255,.035);
      --border:rgba(255,255,255,.12);
      --text:#eef3ff;
      --muted:#9fb0d0;
      --accent:#7dd3fc;
      --accent2:#a78bfa;
      --good:#34d399;
      --bad:#fb7185;
      --shadow:0 18px 50px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(900px 520px at 15% 0%, rgba(125,211,252,.14), transparent 55%),
        radial-gradient(900px 520px at 85% 10%, rgba(167,139,250,.12), transparent 55%),
        var(--bg);
      color:var(--text);
    }
    .wrap{max-width:980px;margin:34px auto;padding:16px}
    .hero{
      border:1px solid var(--border);
      border-radius:22px;
      background: linear-gradient(180deg, var(--panel), var(--panel2));
      box-shadow: var(--shadow);
      padding:18px;
      margin-bottom:14px;
    }
    .top{display:flex;justify-content:space-between;gap:14px;flex-wrap:wrap;align-items:flex-start}
    h1{margin:0;font-size:26px;letter-spacing:.2px}
    .sub{margin:10px 0 0 0;color:var(--muted);line-height:1.5;max-width:760px}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 12px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.16);
      color:var(--muted);
      font-weight:900;
      white-space:nowrap;
    }
    .pill .dot{width:10px;height:10px;border-radius:99px;background:var(--good);box-shadow:0 0 18px rgba(52,211,153,.35)}
    .grid{display:grid;gap:14px}
    @media(min-width:940px){ .grid{grid-template-columns:1.05fr .95fr} }

    .card{
      border:1px solid var(--border);
      border-radius:18px;
      background: linear-gradient(180deg, rgba(255,255,255,.055), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .head{
      padding:14px 16px;
      border-bottom:1px solid var(--border);
      display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
    }
    .head h2{margin:0;font-size:16px}
    .meta{color:var(--muted);font-size:12px}
    .body{padding:14px 16px}

    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    label{font-size:12px;color:var(--muted);font-weight:900}
    input[type="text"], input[type="number"]{
      background:rgba(255,255,255,.03);
      border:1px solid var(--border);
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      font-size:14px;
      outline:none;
    }
    input[type="text"]{min-width:180px}
    input[type="number"]{width:120px}
    .btn{
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 14px;
      border-radius:12px;
      font-weight:950;
      cursor:pointer;
    }
    .btn:hover{background:rgba(255,255,255,.10)}
    .btn.danger{border-color:rgba(251,113,133,.35)}
    .btn.danger:hover{background:rgba(251,113,133,.12)}
    .btn.soft{border-color:rgba(125,211,252,.25)}
    .btn.soft:hover{background:rgba(125,211,252,.10)}

    table{width:100%;border-collapse:separate;border-spacing:0;margin-top:10px}
    th, td{
      border-bottom:1px solid var(--border);
      padding:10px 10px;
      text-align:left;
      font-size:13px;
      vertical-align:top;
    }
    th{color:var(--muted);font-weight:900}
    tr:last-child td{border-bottom:none}
    .totals{
      display:grid;gap:10px;margin-top:10px;
      grid-template-columns:1fr;
    }
    @media(min-width:560px){ .totals{grid-template-columns:1fr 1fr 1fr} }
    .totalBox{
      border:1px solid var(--border);
      border-radius:16px;
      background:rgba(0,0,0,.16);
      padding:12px;
    }
    .name{font-weight:1000}
    .score{font-size:22px;font-weight:1100;margin-top:6px}
    .small{font-size:12px;color:var(--muted);margin-top:6px;line-height:1.35}
    .leader{color:var(--good)}
    .trailer{color:var(--bad)}

    .hint{margin-top:10px;color:var(--muted);font-size:12px;line-height:1.45}
    .foot{margin:18px 0 6px 0;text-align:center;color:var(--muted);font-size:12px;opacity:.9}
    .accent{color:var(--accent);font-weight:1000}
    .accent2{color:var(--accent2);font-weight:1000}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div class="top">
        <div>
          <h1>Skyjo Scoreboard · <span class="accent">3 Spieler</span></h1>
          <p class="sub">
            Pro Runde trägst du die Punkte ein → <span class="accent2">Addieren</span> → Verlauf + Gesamtscore.
            Alles wird automatisch gespeichert (localStorage), damit nichts verloren geht.
          </p>
        </div>
        <div class="pill"><span class="dot"></span> live</div>
      </div>
    </div>

    <div class="grid">
      <!-- Eingabe -->
      <div class="card">
        <div class="head">
          <h2>Runde eintragen</h2>
          <div class="meta">Enter drücken = Add</div>
        </div>
        <div class="body">
          <div class="row" style="margin-bottom:10px">
            <div>
              <label>Spieler 1</label><br>
              <input id="n1" type="text" placeholder="Name" />
            </div>
            <div>
              <label>Spieler 2</label><br>
              <input id="n2" type="text" placeholder="Name" />
            </div>
            <div>
              <label>Spieler 3</label><br>
              <input id="n3" type="text" placeholder="Name" />
            </div>
            <button class="btn soft" id="saveNames" type="button">Namen speichern</button>
          </div>

          <div class="row">
            <div>
              <label>Punkte Runde (Spieler 1)</label><br>
              <input id="s1" type="number" inputmode="numeric" step="1" placeholder="z.B. 12" />
            </div>
            <div>
              <label>Punkte Runde (Spieler 2)</label><br>
              <input id="s2" type="number" inputmode="numeric" step="1" placeholder="z.B. 3" />
            </div>
            <div>
              <label>Punkte Runde (Spieler 3)</label><br>
              <input id="s3" type="number" inputmode="numeric" step="1" placeholder="z.B. 21" />
            </div>
            <button class="btn" id="addRound" type="button">Runde hinzufügen</button>
          </div>

          <div class="hint" id="status"><b>Status:</b> Bereit.</div>

          <div class="totals" id="totals"></div>

          <div class="row" style="margin-top:12px">
            <button class="btn soft" id="undo" type="button">Letzte Runde löschen</button>
            <button class="btn danger" id="reset" type="button">Alles zurücksetzen</button>
          </div>
          <div class="hint">
            Skyjo-Reminder: niedrigster Score gewinnt. Leader = aktuell am wenigsten Punkte.
          </div>
        </div>
      </div>

      <!-- Verlauf -->
      <div class="card">
        <div class="head">
          <h2>Runden-Verlauf</h2>
          <div class="meta" id="roundCount">0 Runden</div>
        </div>
        <div class="body">
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th id="th1">Spieler 1</th>
                <th id="th2">Spieler 2</th>
                <th id="th3">Spieler 3</th>
                <th>Σ</th>
              </tr>
            </thead>
            <tbody id="rows">
              <tr><td colspan="5" style="color:var(--muted)">Noch keine Runde eingetragen.</td></tr>
            </tbody>
          </table>
          <div class="foot">Tip: Nach jeder Runde eintragen → fertig.</div>
        </div>
      </div>
    </div>

    <div class="foot">
      Minimal, schnell, perfekt für den Tisch. ✨
    </div>
  </div>

<script>
  const KEY = "skyjo_scoreboard_v1";

  const state = {
    names: ["Spieler 1","Spieler 2","Spieler 3"],
    rounds: [] // each: [a,b,c]
  };

  function $(id){ return document.getElementById(id); }

  function setStatus(msg){
    $("status").innerHTML = "<b>Status:</b> " + msg;
  }

  function load(){
    try{
      const raw = localStorage.getItem(KEY);
      if(!raw) return;
      const saved = JSON.parse(raw);
      if(saved?.names?.length === 3) state.names = saved.names;
      if(Array.isArray(saved?.rounds)) state.rounds = saved.rounds;
    } catch {}
  }

  function save(){
    localStorage.setItem(KEY, JSON.stringify(state));
  }

  function renderNames(){
    $("n1").value = state.names[0];
    $("n2").value = state.names[1];
    $("n3").value = state.names[2];

    $("th1").textContent = state.names[0];
    $("th2").textContent = state.names[1];
    $("th3").textContent = state.names[2];
  }

  function totals(){
    const t = [0,0,0];
    for(const r of state.rounds){
      t[0] += r[0]; t[1] += r[1]; t[2] += r[2];
    }
    return t;
  }

  function renderTotals(){
    const t = totals();
    const min = Math.min(...t);
    const max = Math.max(...t);

    const box = (i)=> {
      const isLeader = t[i] === min && (t.filter(x=>x===min).length === 1);
      const isTrailer = t[i] === max && (t.filter(x=>x===max).length === 1);
      const cls = isLeader ? "leader" : isTrailer ? "trailer" : "";
      const hint = isLeader ? "Aktuell vorne (niedrigster Score)" : isTrailer ? "Aktuell hinten" : "—";

      return `
        <div class="totalBox">
          <div class="name ${cls}">${state.names[i]}</div>
          <div class="score ${cls}">${t[i]}</div>
          <div class="small">${hint}</div>
        </div>`;
    };

    $("totals").innerHTML = box(0)+box(1)+box(2);
  }

  function renderRounds(){
    $("roundCount").textContent = `${state.rounds.length} Runden`;
    const tbody = $("rows");

    if(state.rounds.length === 0){
      tbody.innerHTML = `<tr><td colspan="5" style="color:var(--muted)">Noch keine Runde eingetragen.</td></tr>`;
      return;
    }

    tbody.innerHTML = state.rounds.map((r, idx)=>{
      const sum = r[0]+r[1]+r[2];
      return `
        <tr>
          <td>${idx+1}</td>
          <td>${r[0]}</td>
          <td>${r[1]}</td>
          <td>${r[2]}</td>
          <td><b>${sum}</b></td>
        </tr>`;
    }).join("");
  }

  function render(){
    renderNames();
    renderTotals();
    renderRounds();
    save();
  }

  function parseIntSafe(v){
    if(v === "" || v == null) return null;
    const n = Number(v);
    if(!Number.isFinite(n)) return null;
    return Math.trunc(n);
  }

  function clearScoreInputs(){
    $("s1").value = "";
    $("s2").value = "";
    $("s3").value = "";
    $("s1").focus();
  }

  function addRound(){
    const a = parseIntSafe($("s1").value);
    const b = parseIntSafe($("s2").value);
    const c = parseIntSafe($("s3").value);

    if(a === null || b === null || c === null){
      setStatus("Bitte alle 3 Punktzahlen eingeben.");
      return;
    }

    state.rounds.push([a,b,c]);
    setStatus(`Runde ${state.rounds.length} hinzugefügt: ${a}, ${b}, ${c}`);
    render();
    clearScoreInputs();
  }

  function saveNames(){
    const n1 = $("n1").value.trim() || "Spieler 1";
    const n2 = $("n2").value.trim() || "Spieler 2";
    const n3 = $("n3").value.trim() || "Spieler 3";
    state.names = [n1,n2,n3];
    setStatus("Namen gespeichert.");
    render();
  }

  function undo(){
    if(state.rounds.length === 0){
      setStatus("Keine Runde zum Löschen.");
      return;
    }
    const last = state.rounds.pop();
    setStatus(`Letzte Runde gelöscht (${last.join(", ")}).`);
    render();
  }

  function resetAll(){
    if(!confirm("Wirklich alles zurücksetzen?")) return;
    state.names = ["Spieler 1","Spieler 2","Spieler 3"];
    state.rounds = [];
    setStatus("Zurückgesetzt.");
    render();
    clearScoreInputs();
  }

  // Wire up
  $("addRound").addEventListener("click", addRound);
  $("saveNames").addEventListener("click", saveNames);
  $("undo").addEventListener("click", undo);
  $("reset").addEventListener("click", resetAll);

  // Enter adds round (nice on phone)
  ["s1","s2","s3"].forEach(id=>{
    $(id).addEventListener("keydown", (e)=>{
      if(e.key === "Enter") addRound();
    });
  });

  load();
  render();
  clearScoreInputs();
</script>
</body>
</html>